#!/bin/bash
# –¢—Ä–∏–≥–≥–µ—Ä–∏—Ç—Å—è –∫–æ–≥–¥–∞ Claude –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–±–æ—Ç—É –Ω–∞–¥ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–µ–π

TASK_DESCRIPTION=$1

echo "üöÄ Starting task: $TASK_DESCRIPTION"

# 1. –°–æ–∑–¥–∞—Ç—å TODO –≤ Notion (—á–µ—Ä–µ–∑ MCP)
# claude mcp notion create-task "$TASK_DESCRIPTION"

# 2. –°–æ–∑–¥–∞—Ç—å feature branch –µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç
CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)
if [[ $CURRENT_BRANCH == "main" || $CURRENT_BRANCH == "master" ]]; then
    BRANCH_NAME=$(echo "$TASK_DESCRIPTION" | sed 's/ /-/g' | tr '[:upper:]' '[:lower:]' | head -c 50)
    git checkout -b "feat/$BRANCH_NAME"
    echo "‚úì Created branch: feat/$BRANCH_NAME"
fi

# 3. –û–±–Ω–æ–≤–∏—Ç—å .claude.md —Å–µ–∫—Ü–∏—é "üéØ –¢–µ–∫—É—â–∏–π —Ñ–æ–∫—É—Å"
if [ -f ".claude.md" ]; then
    sed -i '' "s/## üéØ –¢–µ–∫—É—â–∏–π —Ñ–æ–∫—É—Å.*/## üéØ –¢–µ–∫—É—â–∏–π —Ñ–æ–∫—É—Å\\n$TASK_DESCRIPTION/" .claude.md
fi
