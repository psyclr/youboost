#!/bin/bash
# Ð¢Ñ€Ð¸Ð³Ð³ÐµÑ€Ð¸Ñ‚ÑÑ ÐºÐ¾Ð³Ð´Ð° Claude Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐµÑ‚ Ñ„Ð°Ð¹Ð» Ñ‡ÐµÑ€ÐµÐ· Edit tool

EDITED_FILE=$1

echo "ðŸ“ File edited: $EDITED_FILE"

# 1. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ, Ð½ÑƒÐ¶Ð½Ð¾ Ð»Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ claude.md
if [[ $EDITED_FILE == services/* ]]; then
    echo "âš ï¸  Service file changed, consider updating .claude.md"
fi

# 2. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð»Ð¸Ð½Ñ‚ÐµÑ€ Ð´Ð»Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð½Ð¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð°
if [[ $EDITED_FILE == *.ts || $EDITED_FILE == *.tsx ]]; then
    npx eslint $EDITED_FILE --fix
fi

# 3. ÐÐ²Ñ‚Ð¾Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
npx prettier --write $EDITED_FILE

# 4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ‚Ð¸Ð¿Ð¾Ð² (Ð±Ñ‹ÑÑ‚Ñ€Ð°Ñ)
npx tsc --noEmit $EDITED_FILE 2>/dev/null || true
