#!/bin/bash
# Ð¢Ñ€Ð¸Ð³Ð³ÐµÑ€Ð¸Ñ‚ÑÑ ÐºÐ¾Ð³Ð´Ð° Claude ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ Ð¿Ð»Ð°Ð½ Ð² plan mode

PLAN_FILE=$1

echo "ðŸ“‹ Plan created: $PLAN_FILE"

# 1. Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð¿Ð»Ð°Ð½Ð°
if ! grep -q "## Verification" "$PLAN_FILE"; then
    echo "âš ï¸  Warning: Plan missing verification section"
fi

# 2. Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ÐºÐ¾Ð¿Ð¸ÑŽ Ð¿Ð»Ð°Ð½Ð° Ð² docs/plans/
mkdir -p docs/plans
PLAN_NAME=$(basename "$PLAN_FILE")
DATE=$(date +%Y-%m-%d)
cp "$PLAN_FILE" "docs/plans/${DATE}-${PLAN_NAME}" 2>/dev/null || true

# 3. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ .claude.md Ñ ÑÑÑ‹Ð»ÐºÐ¾Ð¹ Ð½Ð° Ð¿Ð»Ð°Ð½
if [ -f ".claude.md" ]; then
    echo "ðŸ“Ž Plan: docs/plans/${DATE}-${PLAN_NAME}" >> .claude.md
fi
